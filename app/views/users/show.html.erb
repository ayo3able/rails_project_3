<h1>Hello <%= current_user.username%></h1>

<br/>
<br/>

<div class="card-deck">

    <div class ="card bg-info">
      <h2 class="card-title text-center">My Teams</h2>
    </div>
    

    <div class ="card bg-success">
     <h2 class="card-title text-center">My Projects</h2>
    </div>

    <div class ="card bg-warning">
      <h2 class="card-title text-center">My Tasks</h2>
    </div>

 </div>

<div class="card-deck">

<%# Team Card %>

   <div class ="card border-info mb-2">
   <% if current_user.teams.empty?%>
      <div class="card-header text-center"> No Teams Yet </div>
      <div><button type="button" class="btn btn-secondary"><%= link_to 'Add a new Team'.html_safe, new_team_path(@team)%></button></div>
      </div>
      <br/>
      <br/>

     <%else%>
       
      

        <div class ="card border-info ">
         <% current_user.teams.uniq.each do |team| %>
         <div><button type="button" class="btn btn-secondary"><%= link_to 'Add a new Team'.html_safe, new_team_path(@team)%></button></div>
         <div class="card-header text-center border-info">
         <h3 class="card-title">Team: <%= team.name %></h3>
         
                
         </div>
  <div class="card-body">
       
    <%= link_to "Add a Project", new_team_project_path(team) %><br/><br/>

    <%= link_to "Edit", edit_team_path(team) %>
    <br/><br/>
   
    <%= button_to "Delete", team, method: :delete, data: { confirm: 'Are you sure?' }%>
    </div>
    <% end %>
  <% end %>
</div>
  <br/>
       <br/>

<%# Project Card %>
     
  
     <div class ="card border-success mb-2 ">
     <% if current_user.projects.empty?%>
     <div class="card-header text-center"> No Projects Yet </div>
      <div class="card-body"> <h6>Start a new Team or Select Existing Team to Make a new Project</h6> </div>
      </div>
      
     <%else%>
    
    <div class ="card border-success ">
    <% current_user.projects.each do |project| %>
     <div class="card-header text-center  border-success">
      <h3>Project: <%= project.title %></h3>
      <p>Team: <%= project.team.name%></p>
     </div>  
     
    <div class="card-body">
    <p class="card-text"><%= project.goal %></p>
    <%= link_to 'Full Project', project %>
    <br/>
    <br/>
    <%= link_to "Add a Task", new_project_task_path(project) %>
    </div>
  
    <div class="card-footer bg-transparent border-success">
      <%= link_to "Edit", edit_project_path(project) %>
      <br/><br/>
      <%= link_to "Delete Project", project_path, method: :delete, data: { confirm: 'Are you sure?' }%>
     </div>
      <% end %>
        <% end %>
    </div>

    <%# Task Card %>
    
    
      <div class ="card border-warning mb-2">
     <%if current_user.tasks.empty? %> 
          <div class="card-header text-center"><h4> No Tasks Yet</h4></div>
       </div>   
  
    <% else %>
    
     <div class ="card border-warning ">
     <% current_user.tasks.uniq.each do |task|%>
           <div class="card-header text-center"><h4> <%=task.title%> </h4>
           <h6>Project: <%=task.project.title%></h6>
          </div>  
           
     <div class="card-body"> 
       <p class="card-text">Start Date: <%=task.start%></p>
       <p class="card-text">Deadline: <%=task.deadline%></p>
       <p class="card-text text-truncate">instructions: <%=task.instructions%></p>
       </div>
 
    <div><%=link_to "Full Task", task_path(task)%></div><br/>

    <div class="card-footer bg-transparent border-success">
      <%= link_to "Edit", edit_task_path(task) %>
      <br/><br/>
      <%= button_to "Delete", task_path(task), method: :delete, data: { confirm: 'Are you sure?' }%>
     </div>

    <%end%>
    <% end %>
 </div>
</div>

